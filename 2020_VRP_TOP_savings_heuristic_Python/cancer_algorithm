"""
Created on Sat Mar 20 18:05:59 2021
@author: aajp
"""

import csv
import random


""" READ PATIENT DATA FROM CSV FILE AND CREATE PATIENT OBJECTS """

with open('data.csv', mode = 'r', newline = '') as patients:
    reader = csv.reader(patients)
    for record in reader:
        ID, name, balance = record


""" PROBLEM PARAMETERS """

periods = 4 # number of periods (weeks) to consider for the planning
surgery_rooms = 10 # number of surgery rooms available in a period
surgery_teams = 10 # number of surgery teams available in a period

icu = 20 # number of intensive care units available per period



""" ALGORITHM """

for period in periods:
    for patient in p_list: # p_list is patient list sorted by urgency
        # choose a random beta value for the biased-randomization process
        beta = uniform(0.1, 0.3)     
        # assign the best available treatment to patient using ML and biased-rand
        patient.treatment = assign_treatment(patient, resources, beta) 
        # update resources since some will not be available anymore
        update(resources) 
        # use simulator to forecast tumor evolution
        patient.next_status_with_t = simulation(patient) 
        # compute the improvement in patient w.r.t. doing nothing
        p_improvement = patient.next_stauts_with_t - patient.next_status_without_t
        # compute the aggregated improvement, which is the quantity to maximize
        social_improvement += p_improvement

print(social_improvement)



